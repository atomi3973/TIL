# 取り組んだこと
- Next.js

# 学んだこと
## Prisma ClientとglobalThis
- new PrismaClient() は DB 接続を作るため必須
- 開発中の Next.js Hot Reload で何度も生成される可能性あり
- 解決策↓↓↓
```
const globalForPrisma = globalThis as unknown as { prisma: PrismaClient | undefined }
export const prisma = globalForPrisma.prisma ?? new PrismaClient()
if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma
```

## Hot Reload と副作用
- React の import や関数定義はキャッシュされる → 再生成されない
- Prisma Client のように「副作用を持つトップレベルコード」は再実行される → 注意が必要
- 開発中の DB 接続爆増を防ぐには globalThis に保持

# コメント
今日はなぜかsupabaseのアカウントが作成できた。多分何かしらのバグ。環境構築できたので、この調子で勉強していく。